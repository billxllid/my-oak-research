---
description: 页面布局规范（关注速报/报告编写/资料库/仪表盘/系统管理）
globs:
  - "apps/web/app/**"
alwaysApply: true
---

# Oak Research 页面布局规范

本规则基于 Figma 原型设计，约束各功能模块页面的布局结构，确保 Cursor 生成的页面符合设计风格。

---

## 1. 全局布局

- **全局 `layout.tsx`**
  - 顶部导航栏（Logo: Oak Research，右上角为用户菜单/设置入口）
  - 左侧侧边栏（模块导航，固定宽度 240px）
    - 菜单项（与原型一致）：仪表盘、关注速报、报告编写、资料库、系统管理、设置
    - 活跃菜单项使用高亮背景（Tailwind: `bg-muted text-primary`）
  - 右侧为主要内容区（`flex-1`，支持滚动）

---

## 2. 仪表盘 (Dashboard)

- **布局结构**：
  - 顶部：标题「仪表盘」+ 版本号
  - 主内容：两行布局
    1. **第一行**：Top 5 关键词（Grid: 5 列卡片，显示关键词 + 数据 + 对比趋势）
    2. **第二行**：左右分栏
       - 左侧：趋势排行榜（图表组件，Bar/Line）
       - 右侧：最新内容摘要（滚动列表卡片，展示标题 + 摘要 + 时间）

---

## 3. 关注速报 (Focus Bulletin)

### 3.1 关注设置

- **布局结构**：
  - 左侧：配置菜单（关键词设置、分类设置、平台设置、站点设置、搜索引擎设置、代理设置、AI 设置、杂项设置）
  - 右侧：对应的配置表格/表单
  - 表格规范：
    - 顶部：搜索框 + 添加按钮
    - 中部：数据表格（Shadcn `<Table />`）
    - 底部：分页器

### 3.2 关注内容

- **布局结构**：
  - 卡片列表（Grid: 3 列）
  - 卡片内容：
    - 标题（或平台名）
    - 相关人物 / 组织标签（Badge）
    - 摘要（Markdown 渲染）
    - 时间、来源平台、类型（放在卡片底部）
    - 收藏按钮（右上角 IconButton）

---

## 4. 报告编写 (Report Writer)

### 4.1 模板编辑

- **布局结构**：
  - 左侧：模板列表（表格形式，支持搜索 + 添加模板）
  - 右侧：模板编辑器（表单 + Markdown 预览）

### 4.2 报告编辑

- **三栏布局**：
  1. **左侧配置栏**（生成前可见，生成后隐藏）：提示词 + 素材选择 + 模板选择 + 生成按钮
  2. **中间对话栏**：与 AI 的对话记录（消息气泡 UI）
  3. **右侧报告编辑器**：AI 生成的报告，支持 Markdown 编辑 + 撤销/继续修改

### 4.3 报告管理

- **布局结构**：
  - 表格：报告列表（名称、模板、创建时间、操作）
  - 右侧可展开报告详情 / 继续编辑

---

## 5. 资料库 (Library)

### 5.1 知识库管理

- **布局结构**：
  - 顶部：添加知识库按钮 + 搜索框
  - 中部：知识库列表（卡片形式，展示标题、摘要、时间）
  - 新建/编辑知识库弹窗：表单（名称、描述、文件上传、向量模型、最大切片长度）

### 5.2 收藏夹管理

- **布局结构**：
  - 顶部：搜索 + 筛选（平台、时间）
  - 中部：卡片列表（与关注内容相同风格）
  - 详情页：Markdown 渲染 + 相关人物/组织标签

---

## 6. 系统管理 (Sys Admin)

### 6.1 用户管理

- 表格布局：用户 ID、用户名、角色、描述、操作（编辑/删除）
- 顶部：搜索框 + 添加用户按钮 + 筛选条件

### 6.2 权限管理

- 表格布局：角色 ID、角色名称、所属机构、描述、操作

### 6.3 日志管理

- Tab 切换（系统日志 / 操作日志 / 日志推送）
- 每个 Tab 内为表格（记录时间、模块/用户、内容）
- 日志推送 Tab：支持添加推送源（表单）

---

## 7. UI 组件约束

- **卡片**：Shadcn `<Card />`，圆角 `rounded-2xl`，阴影 `shadow-md`
- **表单**：统一使用 React Hook Form + Zod，表单控件来自 `packages/ui/form/`
- **表格**：Shadcn `<Table />`，带分页器
- **Markdown 渲染**：统一使用 `packages/ui/markdown/MarkdownRenderer`
- **布局 Grid/Flex**：Tailwind class 按原型对齐，如 `grid grid-cols-3 gap-4`

---

## 8. 响应式规则

- 侧边栏在 **lg 以下屏幕** 折叠为抽屉式菜单
- 卡片列表在 **md 屏幕** 下两列，**sm 屏幕** 下一列
- 表格在小屏幕自动换行为卡片式显示
